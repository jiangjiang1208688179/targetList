{"remainingRequest":"D:\\mine\\targetList\\targetList\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\mine\\targetList\\targetList\\src\\views\\Table-3.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\mine\\targetList\\targetList\\src\\views\\Table-3.vue","mtime":1550542320540},{"path":"D:\\mine\\targetList\\targetList\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\mine\\targetList\\targetList\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\mine\\targetList\\targetList\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\mine\\targetList\\targetList\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableDataBegin: [\r\n        {\r\n          date: \"2016-05-01\",\r\n          name: \"王小虎\",\r\n          address: \"上海市普陀区金沙江路 1518 弄\"\r\n        },\r\n        {\r\n          date: \"2016-05-02\",\r\n          name: \"王小虎\",\r\n          address: \"上海市普陀区金沙江路 1517 弄\"\r\n        },\r\n        {\r\n          date: \"2016-05-03\",\r\n          name: \"王二虎\",\r\n          address: \"上海市普陀区金沙江路 1519 弄\"\r\n        },\r\n        {\r\n          date: \"2016-05-04\",\r\n          name: \"王二虎\",\r\n          address: \"上海市普陀区金沙江路 1516 弄\"\r\n        },\r\n        {\r\n          date: \"2016-05-05\",\r\n          name: \"王三虎\",\r\n          address: \"上海市普陀区金沙江路 1518 弄\"\r\n        },\r\n        {\r\n          date: \"2016-05-06\",\r\n          name: \"王三虎\",\r\n          address: \"上海市普陀区金沙江路 1517 弄\"\r\n        },\r\n        {\r\n          date: \"2016-05-07\",\r\n          name: \"王小虎\",\r\n          address: \"上海市普陀区金沙江路 1519 弄\"\r\n        },\r\n        {\r\n          date: \"2016-05-08\",\r\n          name: \"王小虎\",\r\n          address: \"上海市普陀区金沙江路 1516 弄\"\r\n        }\r\n      ],\r\n      tableDataName: \"\",\r\n      tableDataEnd: [],\r\n      currentPage: 4,\r\n      pageSize: 2,\r\n      totalItems: 0,\r\n      filterTableDataEnd:[],\r\n      flag:false\r\n    };\r\n  },\r\n  created() {\r\n    this.totalItems = this.tableDataBegin.length;\r\n    if (this.totalItems > this.pageSize) {\r\n      for (let index = 0; index < this.pageSize; index++) {\r\n        this.tableDataEnd.push(this.tableDataBegin[index]);\r\n      }\r\n    } else {\r\n      this.tableDataEnd = this.tableDataBegin;\r\n    }\r\n  },\r\n  methods: {\r\n    //前端搜索功能需要区分是否检索,因为对应的字段的索引不同\r\n    //用两个变量接收currentChangePage函数的参数\r\n    doFilter() {\r\n      if (this.tableDataName == \"\") {\r\n        this.$message.warning(\"查询条件不能为空！\");\r\n        return;\r\n      }\r\n      this.tableDataEnd = []\r\n      //每次手动将数据置空,因为会出现多次点击搜索情况\r\n      this.filterTableDataEnd=[]\r\n      this.tableDataBegin.forEach((value, index) => {\r\n        if(value.name){\r\n          if(value.name.indexOf(this.tableDataName)>=0){\r\n            this.filterTableDataEnd.push(value)\r\n          }\r\n        }\r\n      });\r\n      //页面数据改变重新统计数据数量和当前页\r\n      this.currentPage=1\r\n      this.totalItems=this.filterTableDataEnd.length\r\n      //渲染表格,根据值\r\n      this.currentChangePage(this.filterTableDataEnd)\r\n      //页面初始化数据需要判断是否检索过\r\n      this.flag=true\r\n    },\r\n    openData() {},\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n      this.pageSize = val;\r\n      this.handleCurrentChange(this.currentPage);\r\n    },\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n      this.currentPage = val;\r\n      //需要判断是否检索\r\n      if(!this.flag){\r\n      this.currentChangePage(this.tableDataEnd)\r\n      }else{\r\n      this.currentChangePage(this.filterTableDataEnd)      \r\n      }\r\n    }, //组件自带监控当前页码\r\n    currentChangePage(list) {\r\n      let from = (this.currentPage - 1) * this.pageSize;\r\n      let to = this.currentPage * this.pageSize;\r\n      this.tableDataEnd = [];\r\n      for (; from < to; from++) {\r\n        if (list[from]) {\r\n          this.tableDataEnd.push(list[from]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["Table-3.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Table-3.vue","sourceRoot":"src\\views","sourcesContent":["<template>\r\n<div>\r\n  <el-input v-model=\"tableDataName\" placeholder=\"请输入姓名\" style=\"width:240px\"></el-input>\r\n  <el-button type=\"primary\" @click=\"doFilter\">搜索</el-button>\r\n  <el-button type=\"primary\" @click=\"openData\">展示数据</el-button>\r\n  <el-table\r\n    :data=\"tableDataEnd\"\r\n    border\r\n    style=\"width: 100%\">\r\n    <el-table-column\r\n      prop=\"date\"\r\n      label=\"日期\"\r\n      width=\"180\">\r\n    </el-table-column>\r\n    <el-table-column\r\n      prop=\"name\"\r\n      label=\"姓名\"\r\n      width=\"180\">\r\n    </el-table-column>\r\n    <el-table-column\r\n      prop=\"address\"\r\n      label=\"地址\">\r\n    </el-table-column>\r\n  </el-table>\r\n  <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"currentPage\"\r\n      :page-sizes=\"[1, 2, 3, 4]\"\r\n      :page-size=\"pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"totalItems\">\r\n    </el-pagination>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableDataBegin: [\r\n        {\r\n          date: \"2016-05-01\",\r\n          name: \"王小虎\",\r\n          address: \"上海市普陀区金沙江路 1518 弄\"\r\n        },\r\n        {\r\n          date: \"2016-05-02\",\r\n          name: \"王小虎\",\r\n          address: \"上海市普陀区金沙江路 1517 弄\"\r\n        },\r\n        {\r\n          date: \"2016-05-03\",\r\n          name: \"王二虎\",\r\n          address: \"上海市普陀区金沙江路 1519 弄\"\r\n        },\r\n        {\r\n          date: \"2016-05-04\",\r\n          name: \"王二虎\",\r\n          address: \"上海市普陀区金沙江路 1516 弄\"\r\n        },\r\n        {\r\n          date: \"2016-05-05\",\r\n          name: \"王三虎\",\r\n          address: \"上海市普陀区金沙江路 1518 弄\"\r\n        },\r\n        {\r\n          date: \"2016-05-06\",\r\n          name: \"王三虎\",\r\n          address: \"上海市普陀区金沙江路 1517 弄\"\r\n        },\r\n        {\r\n          date: \"2016-05-07\",\r\n          name: \"王小虎\",\r\n          address: \"上海市普陀区金沙江路 1519 弄\"\r\n        },\r\n        {\r\n          date: \"2016-05-08\",\r\n          name: \"王小虎\",\r\n          address: \"上海市普陀区金沙江路 1516 弄\"\r\n        }\r\n      ],\r\n      tableDataName: \"\",\r\n      tableDataEnd: [],\r\n      currentPage: 4,\r\n      pageSize: 2,\r\n      totalItems: 0,\r\n      filterTableDataEnd:[],\r\n      flag:false\r\n    };\r\n  },\r\n  created() {\r\n    this.totalItems = this.tableDataBegin.length;\r\n    if (this.totalItems > this.pageSize) {\r\n      for (let index = 0; index < this.pageSize; index++) {\r\n        this.tableDataEnd.push(this.tableDataBegin[index]);\r\n      }\r\n    } else {\r\n      this.tableDataEnd = this.tableDataBegin;\r\n    }\r\n  },\r\n  methods: {\r\n    //前端搜索功能需要区分是否检索,因为对应的字段的索引不同\r\n    //用两个变量接收currentChangePage函数的参数\r\n    doFilter() {\r\n      if (this.tableDataName == \"\") {\r\n        this.$message.warning(\"查询条件不能为空！\");\r\n        return;\r\n      }\r\n      this.tableDataEnd = []\r\n      //每次手动将数据置空,因为会出现多次点击搜索情况\r\n      this.filterTableDataEnd=[]\r\n      this.tableDataBegin.forEach((value, index) => {\r\n        if(value.name){\r\n          if(value.name.indexOf(this.tableDataName)>=0){\r\n            this.filterTableDataEnd.push(value)\r\n          }\r\n        }\r\n      });\r\n      //页面数据改变重新统计数据数量和当前页\r\n      this.currentPage=1\r\n      this.totalItems=this.filterTableDataEnd.length\r\n      //渲染表格,根据值\r\n      this.currentChangePage(this.filterTableDataEnd)\r\n      //页面初始化数据需要判断是否检索过\r\n      this.flag=true\r\n    },\r\n    openData() {},\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n      this.pageSize = val;\r\n      this.handleCurrentChange(this.currentPage);\r\n    },\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n      this.currentPage = val;\r\n      //需要判断是否检索\r\n      if(!this.flag){\r\n      this.currentChangePage(this.tableDataEnd)\r\n      }else{\r\n      this.currentChangePage(this.filterTableDataEnd)      \r\n      }\r\n    }, //组件自带监控当前页码\r\n    currentChangePage(list) {\r\n      let from = (this.currentPage - 1) * this.pageSize;\r\n      let to = this.currentPage * this.pageSize;\r\n      this.tableDataEnd = [];\r\n      for (; from < to; from++) {\r\n        if (list[from]) {\r\n          this.tableDataEnd.push(list[from]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>"]}]}