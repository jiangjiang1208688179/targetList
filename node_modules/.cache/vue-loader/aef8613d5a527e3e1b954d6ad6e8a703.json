{"remainingRequest":"D:\\mine\\targetList\\targetList\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\mine\\targetList\\targetList\\src\\components\\alreadyTask.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\mine\\targetList\\targetList\\src\\components\\alreadyTask.vue","mtime":1545381703780},{"path":"D:\\mine\\targetList\\targetList\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\mine\\targetList\\targetList\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\mine\\targetList\\targetList\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\mine\\targetList\\targetList\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\mine\\targetList\\targetList\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.alreadyTarg {\r\n  margin-left: 20%;\r\n  margin-right: 20%;\r\n  background-color: white;\r\n  width: 60%;\r\n  height: 70%;\r\n  box-shadow: 0px 0px 2px 5px #f8f4e3;\r\n  border-radius: 5px;\r\n}\r\n.alreadyItem {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  margin-top: 15px;\r\n  /* border-bottom: 1px solid #ccc; */\r\n}\r\n.alreadyItem div {\r\n  display: inline-block;\r\n}\r\n.completeDate {\r\n  width: 300px;\r\n}\r\n.ww {\r\n  font-size: 12px;\r\n  padding-left: 0px;\r\n  color: #ccc;\r\n}\r\n.completeDate div {\r\n  padding: 10px;\r\n}\r\n.completeItem {\r\n  text-align: left;\r\n  margin-top: 15px;\r\n  width: 300px;\r\n}\r\n.completeItem div {\r\n  padding: 5px;\r\n  display: block;\r\n}\r\n.completeDateWw {\r\n  color: #ccc;\r\n}\r\n",{"version":3,"sources":["alreadyTask.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"alreadyTask.vue","sourceRoot":"src\\components","sourcesContent":["<template>\r\n  <div class=\"alreadyTarg\">\r\n    <h3>已完成的任务</h3>\r\n    <!-- <div>{{dateTarget}}</div> -->\r\n    <div v-for=\"(item, index) in alreadyList\" v-bind:key=\"index\">\r\n      <div class=\"alreadyItem\">\r\n        <div class=\"completeDate\">\r\n          <div>{{item.date.date}}</div>\r\n          <div class=\"ww\">{{item.date.ww}}</div>\r\n        </div>\r\n        <div class=\"completeItem\">\r\n          <div v-for=\"(item1, index1) in item.name\" v-bind:key=\"index1\">{{item1}}</div>\r\n        </div>\r\n      </div>\r\n      <div style=\"display:block;width:90%;height:1px;background-color:#f5f5f5;margin-left:5%;margin-right:5%;margin-top:20px;\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"alreadyTask\",\r\n  props: [\"dateTarget\"], //dateTarget的数据类型是: [{ date: 1545099084455, name: \"a1\" }]\r\n  data() {\r\n    return {\r\n      alreadyList: {},\r\n      dateTarget1: []\r\n    };\r\n  },\r\n  methods: {\r\n    transDate(n) {\r\n      //日期格式转换\r\n      var date1 = {},\r\n        d = new Date(n),\r\n        date = [];\r\n\r\n      date[0] = d.getFullYear();\r\n      date[1] = d.getMonth() + 1;\r\n      date[2] = d.getDate();\r\n      date1.date = date.join(\"-\");\r\n      date1.ww = this.getWW(d.getDay() + 1); //将数字转换成星期一、星期二...\r\n      return date1; //返回一个对象，包含具体哪一天，以及周几\r\n    },\r\n    getWW(n) {\r\n      switch (n) {\r\n        case 1:\r\n          return \"星期一\";\r\n          break;\r\n        case 2:\r\n          return \"星期二\";\r\n          break;\r\n        case 3:\r\n          return \"星期三\";\r\n          break;\r\n        case 4:\r\n          return \"星期四\";\r\n          break;\r\n        case 5:\r\n          return \"星期五\";\r\n          break;\r\n        case 6:\r\n          return \"星期六\";\r\n          break;\r\n        case 7:\r\n          return \"星期日\";\r\n          break;\r\n      }\r\n    },\r\n    mapAlreadyDate(arr) {\r\n      let newArr = []; //按天存储,哪一天完成了什么内容,最终显示的数据结构\r\n      // [{date:{date:2018-12-12,ww:'星期一'},name:[target1,target2]}]\r\n      for (var date of arr) {\r\n        let date1 = this.transDate(date.date); //date1有两个参数，一个date:2018-12-12，一个ww:星期几\r\n        let index = -1;\r\n        let alreadyExists = newArr.some((newDate, j) => {\r\n          // console.log(date1.date, newDate.date.date);\r\n          if (date1.date === newDate.date.date) {\r\n            //此处注意条件的判断\r\n            index = j;\r\n            return true;\r\n          }\r\n        });\r\n        if (!alreadyExists) {\r\n          newArr.push({\r\n            date: date1,\r\n            name: [date.name]\r\n          });\r\n        } else {\r\n          newArr[index].name.push(date.name);\r\n        }\r\n      }\r\n      return newArr;\r\n    },\r\n    alreadylist() {\r\n      axios.get(\"/alreadylist\").then(res => {\r\n        this.dateTarget1 = res.data;\r\n        this.dateTarget1 = this[\"dateTarget1\"].concat(this.dateTarget); //concat()拼接数据不是把拼接的数组直接赋给前边数组  而是返回一个新的连接后的数组，所以需要赋值；\r\n        this.alreadyList = this.mapAlreadyDate(this.dateTarget1);\r\n      });\r\n    }\r\n  },\r\n  watch: {\r\n    dateTarget: function(val) {\r\n      this.alreadylist();\r\n      // this.alreadyList = this.mapAlreadyDate(this.dateTarget);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.alreadylist();\r\n    console.log(this.dateTarget1);\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.alreadyTarg {\r\n  margin-left: 20%;\r\n  margin-right: 20%;\r\n  background-color: white;\r\n  width: 60%;\r\n  height: 70%;\r\n  box-shadow: 0px 0px 2px 5px #f8f4e3;\r\n  border-radius: 5px;\r\n}\r\n.alreadyItem {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  margin-top: 15px;\r\n  /* border-bottom: 1px solid #ccc; */\r\n}\r\n.alreadyItem div {\r\n  display: inline-block;\r\n}\r\n.completeDate {\r\n  width: 300px;\r\n}\r\n.ww {\r\n  font-size: 12px;\r\n  padding-left: 0px;\r\n  color: #ccc;\r\n}\r\n.completeDate div {\r\n  padding: 10px;\r\n}\r\n.completeItem {\r\n  text-align: left;\r\n  margin-top: 15px;\r\n  width: 300px;\r\n}\r\n.completeItem div {\r\n  padding: 5px;\r\n  display: block;\r\n}\r\n.completeDateWw {\r\n  color: #ccc;\r\n}\r\n</style>\r\n"]}]}